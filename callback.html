<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

<script>
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    $(document).ready(function() {
        const code = getParameterByName('code');

        const data = {
            'grant_type': 'authorization_code',
            'client_id': 'a2bef0597c50e1e360384a3be416593f',
            'client_secret': 'pN2hUPGEDiGWUZ5b5Ow97USSXdKfI9yi1hahasel',
            'redirect_uri': 'https://sikhub.github.io/ch-demo-app/callback',
            'code': code
        }

        $.post('https://api.partners.dev.carthook.com/oauth/token', data, function(data) {
            localStorage.setItem('access_token', data.access_token);
            window.location.href = 'https://sikhub.github.io/ch-demo-app';
        });

    });
</script>